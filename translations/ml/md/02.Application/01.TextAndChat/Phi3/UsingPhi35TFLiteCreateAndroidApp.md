# **Microsoft Phi-3.5 tflite เดเดชเดฏเตเดเดฟเดเตเดเต Android เดเดชเตเดชเต เดธเตเดทเตเดเดฟเดเตเดเตฝ**

เดเดคเต Microsoft Phi-3.5 tflite เดฎเตเดกเดฒเตเดเตพ เดเดชเดฏเตเดเดฟเดเตเดเตเดจเตเดจ เดเดฐเต Android เดธเดพเดฎเตเดชเดฟเตพ เดเดฃเต.

## **๐ เดเตเดเดพเดจเด**

Android LLM Inference API เดจเดฟเดเตเดเดณเต Android เดเดชเตเดฒเดฟเดเตเดเตเดทเดจเตเดเตพเดเตเดเต เดตเตเดฃเตเดเดฟ เดตเดฒเดฟเดฏ เดญเดพเดทเดพ เดฎเตเดกเดฒเตเดเตพ (LLMs) เดชเตเตผเดฃเตเดฃเดฎเดพเดฏเตเด on-device เดเดฏเดฟ ฺูเดฟเดชเตเดชเดฟเดเตเดเดพเตป เดเดจเตเดตเดฆเดฟเดเตเดเตเดจเตเดจเต, เดเดคเดฟเดฒเตเดเต เดจเดฟเดเตเดเตพ เดเดดเตเดคเตเดคเต เดธเตเดทเตเดเดฟเดเตเดเตฝ, เดเดธเตเดตเดญเดพเดตเดฟเด เดญเดพเดทเดพ เดฐเตเดชเดคเตเดคเดฟเตฝ เดตเดฟเดตเดฐเด เดคเดฟเดฐเดฏเตฝ, เดกเตเดเตเดฏเตเดฎเตเดจเตเดฑเตเดเตพ เดธเดเดเตเดทเตเดชเดฟเดเตเดเตฝ เดเดจเตเดจเดฟเดต เดชเตเดฒเตเดณเตเดณ เดตเตเดตเดฟเดงเตเดฏเดฎเดพเตผเดจเตเดจ เดเตเดฒเดฟเดเตพ เดจเดเดชเตเดชเดพเดเตเดเดพเตป เดเดดเดฟเดฏเตเด. เด เดเดพเดธเตเดเต เดฌเดฟเตฝเดฑเตเดฑเต-เดเตป เดชเดฟเดจเตเดคเตเดฃanรงa text-to-text เดชเดฒ เดตเดฒเดฟเดฏ เดญเดพเดทเดพ เดฎเตเดกเดฒเตเดเตพเดเตเดเตเดฎเตเดฃเตเดเต, เดเดคเดฟเดจเดพเตฝ เดจเดฟเดเตเดเตพ เดเดฑเตเดฑเดตเตเด เดชเตเดคเดฟเดฏ on-device เดเดจเดฑเตเดฑเตเดฑเตเดตเต AI เดฎเตเดกเดฒเตเดเตพ เดจเดฟเดเตเดเดณเตเดเต Android เดเดชเตเดชเตเดเดณเดฟเตฝ เดชเตเดฐเดฏเตเดเดฟเดเตเดเดพเดตเตเดจเตเดจเดคเดพเดฃเต.

Googld AI Edge Torch เดเดฐเต python เดฒเตเดฌเตเดฐเดฑเดฟเดฏเดพเดฃเต, เดเดคเดฟเตฝ PyTorch เดฎเตเดกเดฒเตเดเดณเต .tflite เดซเตเตผเดฎเดพเดฑเตเดฑเดฟเดฒเตเดเตเดเต เดเตบเดตเตเตผเดเตเดเต เดเตเดฏเตเดฏเดพเดจเตเดณเตเดณ เดชเดฟเดจเตเดคเตเดฃ เดเดฃเตเดเต, เดชเดฟเดจเตเดจเตเดเต เดเดต TensorFlow Lite เฎฎเฎฑเฏเฎฑเฏเฎฎเฏ MediaPipe เดเดชเดฏเตเดเดฟเดเตเดเต เดฑเตบ เดเตเดฏเตเดฏเดพเดตเตเดจเตเดจเดคเดพเดฃเต. เดเดคเต Android, iOS, IoT เดเดจเตเดจเดฟเดตเดฏเตเดเตเดเต เดตเตเดฃเตเดเดฟ เดฎเตเดกเดฒเตเดเตพ เดชเตเตผเดฃเดฎเดพเดฏเตเด on-device เดเดฏเดฟ เดชเตเดฐเดตเตผเดคเตเดคเดฟเดเตเดเดพเดตเตเดจเตเดจ เดเดชเตเดฒเดฟเดเตเดเตเดทเดจเตเดเตพ เดธเดพเดงเตเดฏเดฎเดพเดเตเดเตเดจเตเดจเต. AI Edge Torch เดตเดฟเดถเดพเดฒ CPU เดเดตเตผเตเดเตเด เดคเตเดเดเตเดเดเตเดเดพเดฐเดจเดพเดฏ GPU, NPU เดชเดฟเดจเตเดคเตเดฃเดฏเตเด เดเดซเตผ เดเตเดฏเตเดฏเตเดจเตเดจเต. AI Edge Torch PyTorch-เดจเตเดฎเดพเดฏเดฟ เดเดเตเดคเตเดคเตเดจเตเดฐเด เดเดจเตเดฑเดเตเดฐเตเดฑเตเดฑเต เดเตเดฏเตเดฏเตเดจเตเดจเดคเดฟเดจเดพเดฏเดฟ เดถเตเดฐเดฎเดฟเดเตเดเตเดจเตเดจเต, torch.export()-เดฏเตเดเต เดฎเตเดเดณเดฟเตฝ เดจเดฟเตผเดฎเตเดฎเดฟเดเตเดเต Core ATen operators เดจเตเดฑเต เดจเดฒเตเดฒ เดเดตเตผเตเดเตเด เดจเตฝเดเตเดจเตเดจเต.

## **๐ชฌ เดฎเดพเดฐเตโเดเตเดเดจเดฟเดฐเตโเดฆเตเดฆเตเดถเด**

### **๐ฅ Microsoft Phi-3.5 เดจเต tflite เดชเดฟเดจเตเดคเตเดฃเดฏเดพเดฏเดฟ เดฎเดพเดฑเตเดฑเตเด**

0. เดเดคเต Android 14+ เดตเตเดฃเตเดเดฟ เดเดฃเต

1. Python 3.10.12 เดเตปเดธเตเดฑเตเดฑเดพเตพ เดเตเดฏเตเดฏเตเด

***Suggestion:*** Python env เดเตปเดธเตเดฑเตเดฑเดพเตพ เดเตเดฏเตเดฏเดพเตป conda เดเดชเดฏเตเดเดฟเดเตเดเตเด

2. Ubuntu 20.04 / 22.04 (เดฆเดฏเดตเดพเดฏเดฟ [google ai-edge-torch](https://github.com/google-ai-edge/ai-edge-torch) เดจเต เดถเตเดฐเดฆเตเดง เดเตเดจเตเดฆเตเดฐเตเดเดฐเดฟเดเตเดเตเด)

***Suggestion:*** Azure Linux VM เดเดฒเตเดฒเตเดเตเดเดฟเตฝ 3rd party cloud vm เดเดชเดฏเตเดเดฟเดเตเดเต เดจเดฟเดเตเดเดณเตเดเต env เดธเตเดทเตเดเดฟเดเตเดเตเด

3. Go to your Linux bash , to install Python library 
```bash

git clone https://github.com/google-ai-edge/ai-edge-torch.git

cd ai-edge-torch

pip install -r requirements.txt -U 

pip install tensorflow-cpu -U

pip install -e .

```

4. Download Microsoft-3.5-Instruct from Hugging face


```bash

git lfs install

git clone  https://huggingface.co/microsoft/Phi-3.5-mini-instruct

```

5. Convert Microsoft Phi-3.5 to tflite


```bash

python ai-edge-torch/ai_edge_torch/generative/examples/phi/convert_phi3_to_tflite.py --checkpoint_path  Your Microsoft Phi-3.5-mini-instruct path --tflite_path Your Microsoft Phi-3.5-mini-instruct tflite path  --prefill_seq_len 1024 --kv_cache_max_len 1280 --quantize True

```


### **๐ฅ Microsoft Phi-3.5 เดจเต Android Mediapipe เดฌเดฃเตเดเดฟเดฒเตเดเตเดเดพเดฏเดฟ เดฎเดพเดฑเตเดฑเตเด**

เดฆเดฏเดตเดพเดฏเดฟ เดเดฆเตเดฏเด mediapipe เดเตปเดธเตเดฑเตเดฑเดพเตพ เดเตเดฏเตเดฏเตเด

```bash

pip install mediapipe

```

run this code in [เดจเดฟเดเตเดเดณเตเดเต เดจเตเดเตเดเตโเฐฌเตเดเตเดเต](../../../../code/09.UpdateSamples/Aug/Android/convert/convert_phi.ipynb)



```python

import mediapipe as mp
from mediapipe.tasks.python.genai import bundler

config = bundler.BundleConfig(
    tflite_model='Your Phi-3.5 tflite model path',
    tokenizer_model='Your Phi-3.5 tokenizer model path',
    start_token='start_token',
    stop_tokens=[STOP_TOKENS],
    output_filename='Your Phi-3.5 task model path',
    enable_bytes_to_unicode_mapping=True or Flase,
)
bundler.create_bundle(config)

```


### **๐ฅ adb push เดเดชเดฏเตเดเดฟเดเตเดเต task เดฎเตเดกเตฝ เดจเดฟเดเตเดเดณเตเดเต Android เดกเดฟเดตเตเดธเต เดชเดพเดคเตเดคเดฟเดฒเตเดเตเดเต เดคเดณเตเดณเดฟ**

```bash

adb shell rm -r /data/local/tmp/llm/ # เดฎเตเตปเดชเต เดฒเตเดกเต เดเตเดฏเตเดค เดเดคเตเดเตเดเดฟเดฒเตเด เดฎเตเดกเดฒเตเดเตพ เดจเตเดเตเดเตเด

adb shell mkdir -p /data/local/tmp/llm/

adb push 'Your Phi-3.5 task model path' /data/local/tmp/llm/phi3.task

```

### **๐ฅ เดจเดฟเดเตเดเดณเตเดเต Android เดเตเดกเต เดเดเดฟเดเตเดเตฝ**

![เดกเตเดฎเต](../../../../../../translated_images/ml/demo.06d5a4246f057d1b.webp)

---

<!-- CO-OP TRANSLATOR DISCLAIMER START -->
เดฌเดพเดงเตเดฏเดค เดเดดเดฟเดตเดพเดเตเดเตฝ:
เด เดฐเตเด AI เดคเตผเดเตเดเดฎเดพ เดธเตเดตเดจเดฎเดพเดฏ [Co-op Translator](https://github.com/Azure/co-op-translator) เดเดชเดฏเตเดเดฟเดเตเดเต เดคเตผเดเตเดเดฎ เดเตเดฏเตเดคเดคเดพเดฃเต. เดเดเตเดเตพ เดเตเดคเตเดฏเดคเดฏเตเดเตเดเต เดถเตเดฐเดฎเดฟเดเตเดเดพเดฒเตเด, เดธเตเดตเดฏเด เดชเตเดฐเดตเตผเดคเตเดคเดฟเดเตเดเตเดจเตเดจ เดคเตผเดเตเดฎเดเดณเดฟเตฝ เดชเดฟเดถเดเตเดเดณเต เดเดธเดพเดงเตเดคเดเดณเต เดเดฃเตเดเดพเดฏเดฟเดฐเดฟเดเตเดเดพเดฎเตเดจเตเดจเดคเต เดฆเดฏเดตเดพเดฏเดฟ เดถเตเดฐเดฆเตเดงเดฟเดเตเดเตเด. เดเดคเดฟเดจเตเดฑเต เดฎเดพเดคเตเดญเดพเดทเดฏเดฟเดฒเตเดณเตเดณ เดฏเดฅเดพเตผเดคเตเดฅ เดฐเตเด เดคเดจเตเดจเต เดเดงเดฟเดเตเดคเดฎเดพเดฏ เดเดฑเดตเดฟเดเดฎเดพเดฏเดฟ เดชเดฐเดฟเดเดฃเดฟเดเตเดเดฃเด. เดจเดฟเตผเดฃเดพเดฏเดเดฎเดพเดฏ เดตเดฟเดตเดฐเดเตเดเตพเดเตเดเต เดชเตเดฐเตเดซเดทเดฃเตฝ เดฎเดพเดจเดต เดคเตผเดเตเดเดฎ เดถเตเดชเดพเตผเดถ เดเตเดฏเตเดฏเดชเตเดชเตเดเตเดจเตเดจเต. เด เดคเตผเดเตเดเดฎ เดเดชเดฏเตเดเดฟเดเตเดเดคเดฟเตฝเดจเดฟเดจเตเดจเต เดเดฃเตเดเดพเดฏเตเดเตเดเดพเดตเตเดจเตเดจ เดเดคเตเดเตเดเดฟเดฒเตเด เดคเตเดฑเตเดฑเดฟเดฆเตเดงเดพเดฐเดฃเดเดณเต เดคเตเดฑเตเดฑเดพเดฏ เดตเตเดฏเดพเดเตเดฏเดพเดจเดเตเดเดณเต เดธเดเดฌเดจเตเดงเดฟเดเตเดเตเดณเตเดณ เดฌเดพเดงเตเดฏเดคเดฏเตเดเตเดเต เดเดเตเดเตพ เดเดคเตเดคเดฐเดตเดพเดฆเดฟเดเดณเดฒเตเดฒ.
<!-- CO-OP TRANSLATOR DISCLAIMER END -->