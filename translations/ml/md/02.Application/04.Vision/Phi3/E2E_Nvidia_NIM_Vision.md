### ഉദാഹരണ സാഹചര്യ്യം

മാനസികമായി കരുതുക നിങ്ങൾക്കൊരു ചിത്രം (`demo.png`) ഉണ്ട്, ആ ചിത്രം പ്രോസസ് ചെയ്യുകയും അതിന്റെ പുതിയ പതിപ്പ് (`phi-3-vision.jpg`) സേവ് ചെയ്യുകയും ചെയ്യാനുള്ള Python കോഡ് സൃഷ്ടിക്കണമെന്ന് നിങ്ങൾ ആഗ്രഹിക്കുന്നു. 

മുകളിലെ കോഡ് ഈ പ്രക്രിയയെ ഓട്ടോമേറ്റുചെയ്യുന്നു:

1. പരിസ്ഥിതിയും ആവശ്യമുള്ള ക്രമീകരണങ്ങളും സജ്ജമാക്കൽ.
2. മോഡലിനെ ആവശ്യമായ Python കോഡ് സൃഷ്ടിക്കാൻ നിർദ്ദേശിക്കുന്ന ഒരു പ്രോംപ്റ്റ് സൃഷ്ടിക്കൽ.
3. പ്രോംപ്റ്റ് മോഡലിലേക്ക് അയച്ച് ജനറേറ്റുചെയ്‌ത കോഡ് ശേഖരിക്കൽ.
4. ജനറേറ്റ് ചെയ്ത കോഡ് പുറത്തെടുത്ത് ഓടിപ്പോകൽ.
5. മൂലചിത്രവും പ്രോസസ് ചെയ്ത ചിത്രവും പ്രദർശിപ്പിക്കൽ.

[സാമ്പിൾ കോഡ് പരിഹാരം](../../../../code/06.E2E/E2E_Nvidia_NIM_Phi3_Vision.ipynb)

മൊത്തത്തിലുള്ള കോഡ് ഘട്ടംവൈകുതലായി എന്താണ് ചെയ്യുന്നത് നോക്കാം:

1. **ആവശ്യമായ പാക്കേജ് ഇൻസ്റ്റാൾ ചെയ്യുക**:
    ```python
    !pip install langchain_nvidia_ai_endpoints -U
    ```
    ഈ കമാൻഡ് `langchain_nvidia_ai_endpoints` പാക്കേജ് ഇൻസ്റ്റാൾ ചെയ്യുകയും അത് ഏറ്റവും പുതിയ വേർഷനാണെന്ന് ഉറപ്പാക്കുകയും ചെയ്യുന്നു.

2. **ആവശ്യമായ മോഡ്യൂളുകൾ ഇമ്പോർട്ട് ചെയ്യുക**:
    ```python
    from langchain_nvidia_ai_endpoints import ChatNVIDIA
    import getpass
    import os
    import base64
    ```
    ഈ ഇമ്പോർട്ടുകൾ NVIDIA AI endpoints-ലുമായി ഇടപെടുകയോ, പാസ്‌വേഡുകൾ സുരക്ഷിതമായി കൈകാര്യം ചെയ്യുകയോ, ഓപ്പറേറ്റിങ് സിസ്റ്റവുമായി ഇടപെടുകയോ, base64 ഫോർമാറ്റിൽ ഡാറ്റ എൻകോഡ്/ഡിക്കോഡ് ചെയ്യുകയോ ചെയ്യാൻ ആവശ്യമായ മോഡ്യൂളുകൾ കൊണ്ടുവരുന്നു.

3. **API കീ സജ്ജമാക്കൽ**:
    ```python
    if not os.getenv("NVIDIA_API_KEY"):
        os.environ["NVIDIA_API_KEY"] = getpass.getpass("Enter your NVIDIA API key: ")
    ```
    ഈ കോഡ് `NVIDIA_API_KEY` എൻവയ്റൺമെന്റ് വ്യാരിയബിൾ സജ്ജമാക്കിയിട്ടുണ്ടോ എന്ന് പരിശോധിക്കുന്നു. ഇല്ലെങ്കിൽ, ഇത് ഉപയോക്താവിനോട് അവരുടെ API കീ സുരക്ഷിതമായി നൽകാൻ ആവശ്യപ്പെടുന്നു.

4. **മോഡൽയും ചിത്രം പാതയും നിർവചിക്കുക**:
    ```python
    model = 'microsoft/phi-3-vision-128k-instruct'
    chat = ChatNVIDIA(model=model)
    img_path = './imgs/demo.png'
    ```
    ഇത് ഉപയോഗിക്കാൻ മോഡൽ സജ്ജമാക്കുകയും, നിർദ്ദേശിച്ച മോഡലോടെ `ChatNVIDIA`യുടെ ഒരു ഇന്‍സ്റ്റാൻസ് സൃഷ്ടിക്കുകയും, ചിത്രം ഫയലിന്റെ പാത നിർവചിക്കുകയും ചെയ്യുന്നു.

5. **ടെക്സ്റ്റ് പ്രോംപ്റ്റ് സൃഷ്ടിക്കുക**:
    ```python
    text = "Please create Python code for image, and use plt to save the new picture under imgs/ and name it phi-3-vision.jpg."
    ```
    ഇത് മോഡലിനെ ഒരു ചിത്രം പ്രോസസ് ചെയ്യുന്നതിനുള്ള Python കോഡ് സൃഷ്ടിക്കാൻ നിർദ്ദേശിക്കുന്ന ഒരു ടെക്സ്റ്റ് പ്രോംപ്റ്റ് നിർവചിക്കുന്നു.

6. **ചിത്രം base64 ൽ എൻകോഡ് ചെയ്യുക**:
    ```python
    with open(img_path, "rb") as f:
        image_b64 = base64.b64encode(f.read()).decode()
    image = f'<img src="data:image/png;base64,{image_b64}" />'
    ```
    ഈ കോഡ് ചിത്രം ഫയൽ വായിച്ച് അതിനെ base64 ൽ എൻകോഡ് ചെയ്ത് HTML ഇമേജ് ടാഗ് ഉപയോഗിച്ച് എൻകോഡ് ചെയ്ത ഡാറ്റയുമായി ഒരു ടാഗ് സൃഷ്ടിക്കുന്നു.

7. **ടെക്സ്റ്റ് और ചിത്രം ഒരു പ്രോംപ്റ്റിലേക്ക് സംയോജിപ്പിക്കുക**:
    ```python
    prompt = f"{text} {image}"
    ```
    ഇത് ടെക്സ്റ്റ് പ്രോംപ്റ്റും HTML ഇമേജ് ടാഗും ഒരേ സ്ട്രിംഗിലേക്ക് സംയോജിപ്പിക്കുന്നു.

8. **ChatNVIDIA ഉപയോഗിച്ച് കോഡ് ജനറേറ്റ് ചെയ്യുക**:
    ```python
    code = ""
    for chunk in chat.stream(prompt):
        print(chunk.content, end="")
        code += chunk.content
    ```
    ഈ കോഡ് പ്രോംപ്റ്റ് `ChatNVIDIA` മോഡലിലേക്ക് അയയ്ക്കുകയും ജനറേറ്റ് ചെയ്ത കോഡ് chunk-കളായി ശേഖരിക്കുകയും, ഓരോ chunk-ഉം പ്രിന്റ് ചെയ്ത് `code` സ്ട്രിംഗിലേക്ക് ചേർക്കുകയും ചെയ്യുന്നു.

9. **ജനറേറ്റ് ചെയ്ത ഉള്ളടക്കത്തിൽ നിന്ന് Python കോഡ് പുറത്തെടുക്കുക**:
    ```python
    begin = code.index('```python') + 9
    code = code[begin:]
    end = code.index('```')
    code = code[:end]
    ```
    മാർക്ക്ഡൗൺ ഫോർമാറ്റിംഗ് നീക്കിവച്ച് ജനറേറ്റ് ചെയ്ത ഉള്ളടക്കത്തിൽ നിന്നുള്ള യഥാർത്ഥ Python കോഡ് ഇത് എക്സ്ട്രാക്ട് ചെയ്യുന്നു.

10. **ജനറേറ്റുചെയ്ത കോഡ് ഓടിക്കുക**:
    ```python
    import subprocess
    result = subprocess.run(["python", "-c", code], capture_output=True)
    ```
    ഇത് പുറത്തെടുത്ത Python കോഡ് subprocess ആയി ഓടിച്ച് അതിന്റെ ഔട്ട്‌പുട്ട് പിടിക്കുന്നു.

11. **ചിത്രങ്ങൾ പ്രദർശിപ്പിക്കുക**:
    ```python
    from IPython.display import Image, display
    display(Image(filename='./imgs/phi-3-vision.jpg'))
    display(Image(filename='./imgs/demo.png'))
    ```
    ഈ വരികൾ `IPython.display` മോഡ്യൂളിന്റെ സഹായത്തോടെ ചിത്രങ്ങൾ പ്രദർശിപ്പിക്കുന്നു.

---

<!-- CO-OP TRANSLATOR DISCLAIMER START -->
ഡിസ്ക്ലെയിമർ:
ഈ പ്രമാണം AI തർജ്മാ സേവനമായ [Co-op Translator](https://github.com/Azure/co-op-translator) ഉപയോഗിച്ച് തർജ്ജമ ചെയ്‌തതാണ്. നാം കൃത്യതയ്ക്കായി ശ്രമിച്ചിട്ടുണ്ടെങ്കിലും, ഓട്ടോമാറ്റിക് തർജ്ജമകളിൽ പിശകുകൾ അല്ലെങ്കിൽ തെറ്റായ വിവരങ്ങൾ ഉണ്ടായിരിക്കാമെന്ന് ദയവായി ശ്രദ്ധിക്കുക. അസൽ ഭാഷയിലുള്ള പ്രമാണം അധികാരമുള്ള സ്രോതസ്സായി പരിഗണിക്കണം. നിർണായക വിവരങ്ങൾക്ക് പ്രൊഫഷണൽ മനുഷ്യ ترج്മ ശുപارش ചെയ്യപ്പെടുന്നു. ഈ തർജ്മ ഉപയോഗിച്ചതിന്റെ ഫലമായി ഉണ്ടാകുന്ന ഏതെങ്കിലും തെറ്റിദ്ധാരണകൾക്കും തെറ്റായി വ്യാഖ്യാനിക്കപ്പെടലുകൾക്കും ഞങ്ങൾ ഉത്തരവാദിത്വം വഹിക്കുന്നില്ല.
<!-- CO-OP TRANSLATOR DISCLAIMER END -->