<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "c4fe7f589d179be96a5577b0b8cba6aa",
  "translation_date": "2025-05-09T18:47:47+00:00",
  "source_file": "md/02.Application/01.TextAndChat/Phi3/UsingPhi35TFLiteCreateAndroidApp.md",
  "language_code": "mr"
}
-->
# **Microsoft Phi-3.5 tflite рд╡рд╛рдкрд░реВрди Android рдЕреЕрдк рддрдпрд╛рд░ рдХрд░рдгреЗ**

рд╣рд╛ Microsoft Phi-3.5 tflite рдореЙрдбреЗрд▓реНрд╕ рд╡рд╛рдкрд░реВрди рддрдпрд╛рд░ рдХреЗрд▓реЗрд▓рд╛ Android рд╕реЕрдореНрдкрд▓ рдЖрд╣реЗ.

## **ЁЯУЪ рдорд╛рд╣рд┐рддреА**

Android LLM Inference API рддреБрдореНрд╣рд╛рд▓рд╛ Android рдЕреЕрдкреНрд╕рд╕рд╛рдареА рдореЛрдареНрдпрд╛ рднрд╛рд╖рд╛ рдореЙрдбреЗрд▓реНрд╕ (LLMs) рдкреВрд░реНрдгрдкрдгреЗ рдбрд┐рд╡реНрд╣рд╛рдЗрд╕рд╡рд░ рдЪрд╛рд▓рд╡рдгреНрдпрд╛рдЪреА рд╕реБрд╡рд┐рдзрд╛ рджреЗрддреЗ, рдЬреНрдпрд╛рдЪрд╛ рд╡рд╛рдкрд░ рддреБрдореНрд╣реА рд╡рд┐рд╡рд┐рдз рдХрд╛рдорд╛рдВрд╕рд╛рдареА рдХрд░реВ рд╢рдХрддрд╛, рдЬрд╕реЗ рдХреА рдордЬрдХреВрд░ рддрдпрд╛рд░ рдХрд░рдгреЗ, рдиреИрд╕рд░реНрдЧрд┐рдХ рднрд╛рд╖реЗрдд рдорд╛рд╣рд┐рддреА рдорд┐рд│рд╡рдгреЗ, рдЖрдгрд┐ рджрд╕реНрддрдРрд╡рдЬрд╛рдВрдЪреЗ рд╕рд╛рд░рд╛рдВрд╢ рдмрдирд╡рдгреЗ. рд╣рд╛ рдЯрд╛рд╕реНрдХ рдЕрдиреЗрдХ рдЯреЗрдХреНрд╕реНрдЯ-рдЯреВ-рдЯреЗрдХреНрд╕реНрдЯ рдореЛрдареНрдпрд╛ рднрд╛рд╖рд╛ рдореЙрдбреЗрд▓реНрд╕рд╕рд╛рдареА рдЗрдирдмрд┐рд▓реНрдЯ рд╕рдкреЛрд░реНрдЯ рдкреБрд░рд╡рддреЛ, рддреНрдпрд╛рдореБрд│реЗ рддреБрдореНрд╣реА рддреБрдордЪреНрдпрд╛ Android рдЕреЕрдкреНрд╕рдордзреНрдпреЗ рдирд╡реАрдирддрдо рдСрди-рдбрд┐рд╡реНрд╣рд╛рдЗрд╕ рдЬрдирд░реЗрдЯрд┐рд╡реНрд╣ AI рдореЙрдбреЗрд▓реНрд╕ рд╡рд╛рдкрд░реВ рд╢рдХрддрд╛.

Google AI Edge Torch рд╣реА рдПрдХ Python рд▓рд╛рдпрдмреНрд░рд░реА рдЖрд╣реЗ рдЬреА PyTorch рдореЙрдбреЗрд▓реНрд╕рдирд╛ .tflite рдлреЙрд░рдореЕрдЯрдордзреНрдпреЗ рдХрдиреНрд╡реНрд╣рд░реНрдЯ рдХрд░рдгреНрдпрд╛рд╕ рдорджрдд рдХрд░рддреЗ, рдЬреНрдпрд╛рд▓рд╛ рдирдВрддрд░ TensorFlow Lite рдЖрдгрд┐ MediaPipe рд╕рд╣ рдЪрд╛рд▓рд╡рддрд╛ рдпреЗрддреЗ. рдпрд╛рдореБрд│реЗ Android, iOS рдЖрдгрд┐ IoT рд╕рд╛рдареА рдЕрд╕реЗ рдЕреЕрдкреНрд▓рд┐рдХреЗрд╢рдиреНрд╕ рддрдпрд╛рд░ рдХрд░рддрд╛ рдпреЗрддрд╛рдд рдЬреЗ рдореЙрдбреЗрд▓реНрд╕ рдкреВрд░реНрдгрдкрдгреЗ рдбрд┐рд╡реНрд╣рд╛рдЗрд╕рд╡рд░ рдЪрд╛рд▓рд╡реВ рд╢рдХрддрд╛рдд. AI Edge Torch CPU рдЪрд╛ рд╡рд┐рд╕реНрддреГрдд рд╕рдкреЛрд░реНрдЯ рджреЗрддреЗ, рддрд╕реЗрдЪ рд╕реБрд░реБрд╡рд╛рддреАрдЪрд╛ GPU рдЖрдгрд┐ NPU рд╕рдкреЛрд░реНрдЯрд╣реА рдЖрд╣реЗ. AI Edge Torch PyTorch рд╕реЛрдмрдд рдЬрд╡рд│реВрди рдЗрдВрдЯрд┐рдЧреНрд░реЗрдЯ рд╣реЛрдгреНрдпрд╛рдЪрд╛ рдкреНрд░рдпрддреНрди рдХрд░рддреЗ, torch.export() рд╡рд░ рдЖрдзрд╛рд░рд┐рдд рдЕрд╕реВрди Core ATen рдСрдкрд░реЗрдЯрд░рдЪрд╛ рдЪрд╛рдВрдЧрд▓рд╛ рдХрд╡реНрд╣рд░реЗрдЬ рджреЗрддреЗ.

## **ЁЯкм рдорд╛рд░реНрдЧрджрд░реНрд╢рдХ**

### **ЁЯФе Microsoft Phi-3.5 рдЪреЗ tflite рдордзреНрдпреЗ рдХрдиреНрд╡реНрд╣рд░реНрд╢рди**

0. рд╣рд╛ рд╕реЕрдореНрдкрд▓ Android 14+ рд╕рд╛рдареА рдЖрд╣реЗ

1. Python 3.10.12 рдЗрдиреНрд╕реНрдЯреЙрд▓ рдХрд░рд╛

***рд╕реВрдЪрдирд╛:*** Python environment рд╕рд╛рдареА conda рд╡рд╛рдкрд░рдгреНрдпрд╛рдЪрд╛ рд╕рд▓реНрд▓рд╛ рджрд┐рд▓рд╛ рдЬрд╛рддреЛ

2. Ubuntu 20.04 / 22.04 (рдХреГрдкрдпрд╛ [google ai-edge-torch](https://github.com/google-ai-edge/ai-edge-torch) рд╡рд░ рд▓рдХреНрд╖ рдареЗрд╡рд╛)

***рд╕реВрдЪрдирд╛:*** Azure Linux VM рдХрд┐рдВрд╡рд╛ рддреГрддреАрдп рдкрдХреНрд╖ рдХреНрд▓рд╛рдЙрдб VM рд╡рд╛рдкрд░реВрди environment рддрдпрд╛рд░ рдХрд░рд╛

3. Linux bash рдордзреНрдпреЗ рдЬрд╛ рдЖрдгрд┐ Python рд▓рд╛рдпрдмреНрд░рд░реА рдЗрдиреНрд╕реНрдЯреЙрд▓ рдХрд░рд╛

```bash

git clone https://github.com/google-ai-edge/ai-edge-torch.git

cd ai-edge-torch

pip install -r requirements.txt -U 

pip install tensorflow-cpu -U

pip install -e .

```

4. Hugging face рд╡рд░реВрди Microsoft-3.5-Instruct рдбрд╛рдЙрдирд▓реЛрдб рдХрд░рд╛

```bash

git lfs install

git clone  https://huggingface.co/microsoft/Phi-3.5-mini-instruct

```

5. Microsoft Phi-3.5 рдЪреЗ tflite рдордзреНрдпреЗ рдХрдиреНрд╡реНрд╣рд░реНрд╢рди рдХрд░рд╛

```bash

python ai-edge-torch/ai_edge_torch/generative/examples/phi/convert_phi3_to_tflite.py --checkpoint_path  Your Microsoft Phi-3.5-mini-instruct path --tflite_path Your Microsoft Phi-3.5-mini-instruct tflite path  --prefill_seq_len 1024 --kv_cache_max_len 1280 --quantize True

```


### **ЁЯФе Microsoft Phi-3.5 рдЪреЗ Android Mediapipe Bundle рдордзреНрдпреЗ рдХрдиреНрд╡реНрд╣рд░реНрд╢рди**

рдХреГрдкрдпрд╛ рдЖрдзреА mediapipe рдЗрдиреНрд╕реНрдЯреЙрд▓ рдХрд░рд╛

```bash

pip install mediapipe

```

рд╣рд╛ рдХреЛрдб [рддреБрдордЪреНрдпрд╛ notebook](../../../../../../code/09.UpdateSamples/Aug/Android/convert/convert_phi.ipynb) рдордзреНрдпреЗ рдЪрд╛рд▓рд╡рд╛

```python

import mediapipe as mp
from mediapipe.tasks.python.genai import bundler

config = bundler.BundleConfig(
    tflite_model='Your Phi-3.5 tflite model path',
    tokenizer_model='Your Phi-3.5 tokenizer model path',
    start_token='start_token',
    stop_tokens=[STOP_TOKENS],
    output_filename='Your Phi-3.5 task model path',
    enable_bytes_to_unicode_mapping=True or Flase,
)
bundler.create_bundle(config)

```


### **ЁЯФе adb рд╡рд╛рдкрд░реВрди рддреБрдордЪрд╛ рдЯрд╛рд╕реНрдХ рдореЙрдбреЗрд▓ Android рдбрд┐рд╡реНрд╣рд╛рдЗрд╕рдЪреНрдпрд╛ рдкрд╛рдерд╡рд░ рдкрд╛рдард╡рд╛**

```bash

adb shell rm -r /data/local/tmp/llm/ # Remove any previously loaded models

adb shell mkdir -p /data/local/tmp/llm/

adb push 'Your Phi-3.5 task model path' /data/local/tmp/llm/phi3.task

```

### **ЁЯФе рддреБрдордЪрд╛ Android рдХреЛрдб рдЪрд╛рд▓рд╡рд╛**

![demo](../../../../../../translated_images/demo.8981711efb5a9cee5dcd835f66b3b31b94b4f3e527300e15a98a0d48863b9fbd.mr.png)

**рдЕрд╕реНрд╡реАрдХрд░рдг**:  
рд╣рд╛ рджрд╕реНрддрдРрд╡рдЬ AI рдЕрдиреБрд╡рд╛рдж рд╕реЗрд╡рд╛ [Co-op Translator](https://github.com/Azure/co-op-translator) рд╡рд╛рдкрд░реВрди рдЕрдиреБрд╡рд╛рджрд┐рдд рдХреЗрд▓рд╛ рдЖрд╣реЗ. рдЖрдореНрд╣реА рдЕрдЪреВрдХрддреЗрд╕рд╛рдареА рдкреНрд░рдпрддреНрди рдХрд░рддреЛ, рдкрд░рдВрддреБ рдХреГрдкрдпрд╛ рд▓рдХреНрд╖рд╛рдд рдареЗрд╡рд╛ рдХреА рд╕реНрд╡рдпрдВрдЪрд▓рд┐рдд рдЕрдиреБрд╡рд╛рджрд╛рдВрдордзреНрдпреЗ рдЪреБрдХрд╛ рдХрд┐рдВрд╡рд╛ рдЕрдЪреВрдХрддреЗрдЪреА рдХрдорддрд░рддрд╛ рдЕрд╕реВ рд╢рдХрддреЗ. рдореВрд│ рджрд╕реНрддрдРрд╡рдЬ рддреНрдпрд╛рдЪреНрдпрд╛ рд╕реНрдерд╛рдирд┐рдХ рднрд╛рд╖реЗрдд рдЕрдзрд┐рдХреГрдд рд╕реНрд░реЛрдд рдорд╛рдирд▓рд╛ рдЬрд╛рд╡рд╛. рдорд╣рддреНрддреНрд╡рд╛рдЪреНрдпрд╛ рдорд╛рд╣рд┐рддреАрд╕рд╛рдареА рд╡реНрдпрд╛рд╡рд╕рд╛рдпрд┐рдХ рдорд╛рдирд╡реА рдЕрдиреБрд╡рд╛рдж рд╢рд┐рдлрд╛рд░рд╕ рдХреЗрд▓реА рдЬрд╛рддреЗ. рдпрд╛ рдЕрдиреБрд╡рд╛рджрд╛рдЪреНрдпрд╛ рд╡рд╛рдкрд░рд╛рдореБрд│реЗ рд╣реЛрдгрд╛рд▒реНрдпрд╛ рдХреЛрдгрддреНрдпрд╛рд╣реА рдЧреИрд░рд╕рдордЬреБрддреА рдХрд┐рдВрд╡рд╛ рдЪреБрдХреАрдЪреНрдпрд╛ рдЕрд░реНрде рд▓рд╛рд╡рдгреНрдпрд╛рдмрджреНрджрд▓ рдЖрдореНрд╣реА рдЬрдмрд╛рдмрджрд╛рд░ рдирд╛рд╣реА.