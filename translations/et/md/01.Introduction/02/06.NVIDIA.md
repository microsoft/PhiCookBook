## Phi Family NVIDIA NIM-is

NVIDIA NIM on lihtsasti kasutatavate mikroteenuste komplekt, mis on loodud generatiivsete AI mudelite juurutamise kiirendamiseks pilves, andmekeskustes ja tööjaamades. NIM-id on jaotatud mudeliperekondade ja üksikute mudelite alusel. Näiteks NVIDIA NIM suurte keelemudelite (LLM-ide) jaoks toob tipptasemel LLM-ide võimsuse ettevõtte rakendustesse, pakkudes ületamatuid loomuliku keele töötlemise ja mõistmise võimalusi.

NIM muudab IT- ja DevOps-tiimidele lihtsaks suurte keelemudelite (LLM-ide) isemajutamise oma hallatavates keskkondades, pakkudes samal ajal arendajatele tööstusstandardi API-sid, mis võimaldavad neil luua võimsaid kaaslasi, vestlusroboteid ja AI-assistente, mis võivad nende äri muuta. Kasutades NVIDIA tipptasemel GPU kiirendust ja skaleeritavat juurutamist, pakub NIM kiireimat teed järelduseni, tagades ületamatu jõudluse.

NIVIDIA NIM-i abil saate kasutada Phi Family mudeleid järelduste tegemiseks.

![nim](../../../../../imgs/01/02/06/Phi-NIM.png)

### **Näited - Phi-3-Vision NVIDIA NIM-is**

Kujutage ette, et teil on pilt (`demo.png`) ja soovite luua Python-koodi, mis töötleb seda pilti ja salvestab uue versiooni sellest (`phi-3-vision.jpg`).

Ülaltoodud kood automatiseerib selle protsessi järgmiselt:

1. Keskkonna ja vajalike konfiguratsioonide seadistamine.
2. Loo juhis, mis suunab mudelit genereerima vajalikku Python-koodi.
3. Juhise saatmine mudelile ja genereeritud koodi kogumine.
4. Genereeritud koodi eraldamine ja käivitamine.
5. Algse ja töödeldud pildi kuvamine.

See lähenemine kasutab AI võimsust, et automatiseerida pilditöötlusülesandeid, muutes eesmärkide saavutamise lihtsamaks ja kiiremaks.

[Näidiskoodi lahendus](../../../../../code/06.E2E/E2E_Nvidia_NIM_Phi3_Vision.ipynb)

Vaatame, mida kogu kood samm-sammult teeb:

1. **Paigalda vajalik pakett**:
    ```python
    !pip install langchain_nvidia_ai_endpoints -U
    ```
    See käsk paigaldab `langchain_nvidia_ai_endpoints` paketi, tagades, et see on uusim versioon.

2. **Impordi vajalikud moodulid**:
    ```python
    from langchain_nvidia_ai_endpoints import ChatNVIDIA
    import getpass
    import os
    import base64
    ```
    Need impordid toovad sisse vajalikud moodulid NVIDIA AI lõpp-punktidega suhtlemiseks, paroolide turvaliseks käsitlemiseks, operatsioonisüsteemiga suhtlemiseks ja andmete kodeerimiseks/dekodeerimiseks base64 formaadis.

3. **Seadista API võti**:
    ```python
    if not os.getenv("NVIDIA_API_KEY"):
        os.environ["NVIDIA_API_KEY"] = getpass.getpass("Enter your NVIDIA API key: ")
    ```
    See kood kontrollib, kas `NVIDIA_API_KEY` keskkonnamuutuja on seadistatud. Kui ei, palub see kasutajal sisestada oma API võti turvaliselt.

4. **Määra mudel ja pildi tee**:
    ```python
    model = 'microsoft/phi-3-vision-128k-instruct'
    chat = ChatNVIDIA(model=model)
    img_path = './imgs/demo.png'
    ```
    See määrab kasutatava mudeli, loob `ChatNVIDIA` eksemplari määratud mudeliga ja määrab pildifaili tee.

5. **Loo tekstijuhis**:
    ```python
    text = "Please create Python code for image, and use plt to save the new picture under imgs/ and name it phi-3-vision.jpg."
    ```
    See määratleb tekstijuhise, mis suunab mudelit genereerima Python-koodi pildi töötlemiseks.

6. **Kodeeri pilt base64 formaadis**:
    ```python
    with open(img_path, "rb") as f:
        image_b64 = base64.b64encode(f.read()).decode()
    image = f'<img src="data:image/png;base64,{image_b64}" />'
    ```
    See kood loeb pildifaili, kodeerib selle base64 formaadis ja loob HTML-pildisildi kodeeritud andmetega.

7. **Ühenda tekst ja pilt juhiseks**:
    ```python
    prompt = f"{text} {image}"
    ```
    See ühendab tekstijuhise ja HTML-pildisildi üheks stringiks.

8. **Genereeri kood ChatNVIDIA abil**:
    ```python
    code = ""
    for chunk in chat.stream(prompt):
        print(chunk.content, end="")
        code += chunk.content
    ```
    See kood saadab juhise `ChatNVIDIA` mudelile ja kogub genereeritud koodi osadena, printides ja lisades iga osa `code` stringi.

9. **Eralda Python-kood genereeritud sisust**:
    ```python
    begin = code.index('```python') + 9
    code = code[begin:]
    end = code.index('```')
    code = code[:end]
    ```
    See eraldab tegeliku Python-koodi genereeritud sisust, eemaldades markdown-vormingu.

10. **Käivita genereeritud kood**:
    ```python
    import subprocess
    result = subprocess.run(["python", "-c", code], capture_output=True)
    ```
    See käivitab eraldatud Python-koodi alamprotsessina ja salvestab selle väljundi.

11. **Kuva pildid**:
    ```python
    from IPython.display import Image, display
    display(Image(filename='./imgs/phi-3-vision.jpg'))
    display(Image(filename='./imgs/demo.png'))
    ```
    Need read kuvavad pilte, kasutades `IPython.display` moodulit.

---

**Lahtiütlus**:  
See dokument on tõlgitud AI tõlketeenuse [Co-op Translator](https://github.com/Azure/co-op-translator) abil. Kuigi püüame tagada täpsust, palume arvestada, et automaatsed tõlked võivad sisaldada vigu või ebatäpsusi. Algne dokument selle algses keeles tuleks pidada autoriteetseks allikaks. Olulise teabe puhul soovitame kasutada professionaalset inimtõlget. Me ei vastuta arusaamatuste või valesti tõlgenduste eest, mis võivad tekkida selle tõlke kasutamise tõttu.