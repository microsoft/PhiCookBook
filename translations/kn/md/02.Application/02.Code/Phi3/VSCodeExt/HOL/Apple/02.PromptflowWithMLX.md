<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "3dbbf568625b1ee04b354c2dc81d3248",
  "translation_date": "2025-12-21T20:05:01+00:00",
  "source_file": "md/02.Application/02.Code/Phi3/VSCodeExt/HOL/Apple/02.PromptflowWithMLX.md",
  "language_code": "kn"
}
-->
# **Lab 2 -  AIPC ನಲ್ಲಿ Phi-3-mini ಜೊತೆಗೆ Prompt flow ಓಡಿಸುವುದು**

## **Prompt flow ಎಂದರೇನು**

Prompt flow ಎಂಬುದು ಐಡಿಯೇಷನ್, ಪ್ರೋಟೋಟೈಪಿಂಗ್, ಪರೀಕ್ಷೆ, ಮೌಲ್ಯಮಾಪನದಿಂದ ಉತ್ಪಾದನೆಗೆ ನಿಯೋಜನೆ ಮತ್ತು ಮಾನಿಟೋರಿಂಗ್ ವರೆಗೆ LLM ಆಧಾರಿತ AI ಅಪ್ಲಿಕೇಶನ್‌ಗಳ ಎಂಡ್-ಟು-ಎಂಡ್ ಅಭಿವೃದ್ಧಿ ಚಕ್ರವನ್ನು ಸುಗಮಗೊಳಿಸಲು ವಿನ್ಯಾಸಗೊಳಿಸಿದ ಅಭಿವೃದ್ಧಿ ಉಪಕರಣಗಳ ಸಮೂಹವಾಗಿದೆ. ಇದು prompt engineering ಅನ್ನು ಬಹಳ ಸುಲಭಗೊಳಿಸುತ್ತದೆ ಮತ್ತು ನಿಮಗೆ ಉತ್ಪಾದನಾ ಗುಣಮಟ್ಟದ LLM ಅನ್ವಯಿಕೆಗಳನ್ನು ನಿರ್ಮಿಸಲು ಸಕ್ರಿಯವಾಗಿಸುತ್ತದೆ.

Prompt flow ಮೂಲಕ, ನೀವು ಸಾಮರ್ಥ್ಯಗಳನ್ನು ಪಡೆಯಬಹುದು:

- LLMಗಳು, ಪ್ರಾಂಪ್ಟ್‌ಗಳು, Python ಕೋಡ್ ಮತ್ತು ಇತರ ಉಪಕರಣಗಳನ್ನು ಕಾರ್ಯನಿರ್ವಹಣೀಯ ಕಾರ್ಯಪ್ರವಾಹದಲ್ಲಿ ಸಂಪರ್ಕಿಸುವ flows ರಚಿಸಲು.

- ನಿಮ್ಮ flows ಅನ್ನು ಡಿಬಗ್ ಮತ್ತು ಪುನರಾವರ್ತಿಸಲು, ವಿಶೇಷವಾಗಿ LLMಗಳೊಂದಿಗೆ ಇರುವ ಸಂಪರ್ಕಗಳನ್ನು ಸುಲಭವಾಗಿ ಪರೀಕ್ಷಿಸಲು.

- ನಿಮ್ಮ flows ಅನ್ನು ಮೌಲ್ಯಮಾಪನ ಮಾಡಿ, ದೊಡ್ಡ ಡೇಟಾಸೆಟ್‌ಗಳೊಂದಿಗೆ ಗುಣಮಟ್ಟ ಮತ್ತು ಕಾರ್ಯಕ್ಷಮತೆ ಮೌಲ್ಯಗಳನ್ನು ಲೆಕ್ಕಹಾಕಲು.

- ನಿಮ್ಮ CI/CD ವ್ಯವಸ್ಥೆಯೊಂದಿಗೆ ಟೆಸ್ಟಿಂಗ್ ಹಾಗೂ ಮೌಲ್ಯಮಾಪನವನ್ನು ಇಂಟಿಗ್ರೇಟ್ ಮಾಡಿ ನಿಮ್ಮ flow ನ ಗುಣಮಟ್ಟವನ್ನು ಖಚಿತಪಡಿಸಲು.

- ನಿಮ್ಮ ಆಯ್ಕೆಮಾಡಿದ ಸರ್ವಿಂಗ್ ಪ್ಲಾಟ್‌ಫಾರ್ಮ್‌ಗೆ ಅಥವಾ ನಿಮ್ಮ ಅಪ್ಲಿಕೇಶನ್ ಕೋಡ್ ಬೇಸ್‌ಗೆ ಸುಲಭವಾಗಿ ನಿಮ್ಮ flows ಅನ್ನು ನಿಯೋಜಿಸಲು.

- (ಐಚ್ಛಿಕ ಆದರೆ ಗರಿಷ್ಟವಾಗಿ ಶಿಫಾರಸು ಮಾಡಲಾಗಿದೆ) Azure AI ನ ತ обла cloud ಆವೃತ್ತಿಯ Prompt flow ಯನ್ನು ಬಳಸಿಕೊಂಡು ತಂಡದೊಂದಿಗೆ ಸಹಕರಿಸಲು.



## **Apple Silicon ನಲ್ಲಿ ಜನರೇಶನ್ ಕೋಡ್ ಫ್ಲೋಗಳನ್ನು ನಿರ್ಮಿಸುವುದು**

***ಗಮನಿಸಿ*** ：ನೀವು ಪರಿಸರ ಸ್ಥಾಪನೆಯನ್ನೇ ಮುಗಿಸಿಲ್ಲದಿದ್ದರೆ, ದಯವಿಟ್ಟು [ಲ್ಯಾಬ್ 0 - ಸ್ಥಾಪನೆಗಳು](./01.Installations.md) ಅನ್ನು ಭೇಟಿಕೊಡಿ

1. Visual Studio Code ನಲ್ಲಿ Prompt flow ವಿಸ್ತರಣೆ (Extension) ಅನ್ನು ತೆರೆಯಿರಿ ಮತ್ತು ಖಾಲಿ flow ಪ್ರಾಜೆಕ್ಟ್ ಅನ್ನು ರಚಿಸಿ

![ರಚಿಸಿ](../../../../../../../../../translated_images/kn/pf_create.bde888dc83502eba.png)

2. Inputs ಮತ್ತು Outputs ಪ್ಯಾರಾಮೀಟರ್‌ಗಳನ್ನು ಸೇರಿಸಿ ಮತ್ತು Python ಕೋಡ್ ಅನ್ನು ಹೊಸ flow ಆಗಿ ಸೇರಿಸಿರಿ

![ಫ್ಲೋ](../../../../../../../../../translated_images/kn/pf_flow.520824c0969f2a94.png)


You can refer to this structure (flow.dag.yaml) to construct your flow

```yaml

inputs:
  prompt:
    type: string
    default: Write python code for Fibonacci serie. Please use markdown as output
outputs:
  result:
    type: string
    reference: ${gen_code_by_phi3.output}
nodes:
- name: gen_code_by_phi3
  type: python
  source:
    type: code
    path: gen_code_by_phi3.py
  inputs:
    prompt: ${inputs.prompt}


```

3. phi-3-mini ಅನ್ನು ಕ್ವಾಂಟೈಸ್ ಮಾಡಿ

ನಾವು ಸ್ಥಳೀಯ ಸಾಧನಗಳಲ್ಲಿ SLM ಅನ್ನು ಉತ್ತಮವಾಗಿ ಚಾಲನೆ ಮಾಡುವ ನಿರೀಕ್ಷೆಯಲ್ಲಿದ್ದೇವೆ. ಸಾಮಾನ್ಯವಾಗಿ, ನಾವು ಮಾದರಿಯನ್ನು ಕ್ವಾಂಟೈಸ್ ಮಾಡುತ್ತೇವೆ (INT4, FP16, FP32)


```bash

python -m mlx_lm.convert --hf-path microsoft/Phi-3-mini-4k-instruct

```

**ಗಮನಿಸಿ:** ಡೀಫಾಲ್ಟ್ ಫೋಲ್ಡರ್ ಆಗಿದೆ mlx_model 

4. ***Chat_With_Phi3.py*** ಫೈಲ್‌ನಲ್ಲಿ ಕೋಡ್ ಅನ್ನು ಸೇರಿಸಿ


```python


from promptflow import tool

from mlx_lm import load, generate


# ಕೋಡ್ ಅನ್ನು ಸೇವ್ ಮಾಡಿದ ನಂತರ ಉಪಕರಣದ ಫಂಕ್ಷನ್‌ನ ಆರ್ಗ್ಯುಮೆಂಟ್‌ಗಳ ಆಧಾರದ ಮೇಲೆ ಇನ್‌ಪುಟ್ ವಿಭಾಗ ಬದಲಾಗುತ್ತದೆ
# ಆರ್ಗ್ಯುಮೆಂಟ್‌ಗಳಿಗೆ ಮತ್ತು ರಿಟರ್ನ್ ಮೌಲ್ಯಕ್ಕೆ ಪ್ರಕಾರ (type) ಸೇರಿಸುವುದರಿಂದ ವ್ಯವಸ್ಥೆಗೆ ಪ್ರಕಾರಗಳನ್ನು ಸರಿಯಾಗಿ ತೋರಿಸಲು ಸಹಾಯವಾಗುತ್ತದೆ
# ದಯವಿಟ್ಟು ಅಗತ್ಯಕ್ಕೆ ಅನುಗುಣವಾಗಿ ಫಂಕ್ಷನ್ ಹೆಸರು/ಸಿಗ್ನೇಚರ್ ನವೀಕರಿಸಿ
@tool
def my_python_tool(prompt: str) -> str:

    model_id = './mlx_model_phi3_mini'

    model, tokenizer = load(model_id)

    # <|user|>\nPython ಕೋಡ್ ಅನ್ನು Fibonacci ಸರಣಿಗಾಗಿ ಬರೆಯಿರಿ. ದಯವಿಟ್ಟು ಔಟ್‌ಪುಟ್‌ಗಾಗಿ Markdown ಬಳಸಿ<|end|>\n<|assistant|>

    response = generate(model, tokenizer, prompt="<|user|>\n" + prompt  + "<|end|>\n<|assistant|>", max_tokens=2048, verbose=True)

    return response


```

4. ಜನರೇಶನ್ ಕೋಡ್ ಸರಿಯಾಗಿದೆಯೇ ಎಂದು ಪರಿಶೀಲಿಸಲು ನೀವು Debug ಅಥವಾ Run ನಿಂದ flow ಅನ್ನು ಪರೀಕ್ಷಿಸಬಹುದು

![ರನ್](../../../../../../../../../translated_images/kn/pf_run.4239e8a0b420a582.png)

5. ಟರ್ಮಿನಲ್‌ನಲ್ಲಿ ಡೆವಲಪ್‌ಮೆಂಟ್ API ಆಗಿ flow ಅನ್ನು ಚಾಲನೆ ಮಾಡಿ

```

pf flow serve --source ./ --port 8080 --host localhost   

```

ನೀವು ಇದನ್ನು Postman / Thunder Client ನಲ್ಲಿ ಪರೀಕ್ಷಿಸಬಹುದು


### **ಗಮನಿಸಿ**

1. ಮೊದಲ ಓಟ/ರನ್ ಹೆಚ್ಚಿನ ಕಾಲವನ್ನು ತೆಗೆದುಕೊಳ್ಳುತ್ತದೆ. phi-3 ಮಾದರಿಯನ್ನು Hugging face CLI ನಿಂದ ಡೌನ್‌ಲೋಡ್ ಮಾಡುವುದು ಶಿಫಾರಸು ಮಾಡಲಾಗಿದೆ.

2. Intel NPU ಯ ಲೆಕ್ಕಾಚಾರದ ಸಾಮರ್ಥ್ಯದ ಮಿತಿ ಪರಿಗಣಿಸಿ, Phi-3-mini-4k-instruct ಬಳಸುವುದು ಶಿಫಾರಸು ಮಾಡಲಾಗುತ್ತದೆ.

3. ನಾವು INT4 ಪರಿವರ್ತನೆಯನ್ನು ಕ್ವಾಂಟೈಸ್ ಮಾಡಲು Intel NPU Acceleration ಅನ್ನು ಬಳಸುತ್ತೇವೆ, ಆದರೆ ಸೇವೆಯನ್ನು ಮರುಚಲಾಯಿಸಿದರೆ, ನಿಮಗೆ cache ಮತ್ತು nc_workshop ಫೋಲ್ಡರ್‌ಗಳನ್ನು ಅಳಿಸಬೇಕು.



## **ಸಂಪನ್ಮೂಲಗಳು**

1. Promptflow ಬಗ್ಗೆ ಕಲಿಯಿರಿ [https://microsoft.github.io/promptflow/](https://microsoft.github.io/promptflow/)

2. Intel NPU Acceleration ಬಗ್ಗೆ ಕಲಿಯಿರಿ [https://github.com/intel/intel-npu-acceleration-library](https://github.com/intel/intel-npu-acceleration-library)

3. ಸ್ಯಾಂಪಲ್ ಕೋಡ್ ಡೌನ್‌ಲೋಡ್ ಮಾಡಿ [ಸ್ಥಳೀಯ NPU ಏಜೆಂಟ್ ಉದಾಹರಣಾ ಕೋಡ್](../../../../../../../../../code/07.Lab/01/AIPC/local-npu-agent)

---

<!-- CO-OP TRANSLATOR DISCLAIMER START -->
ಅಸ್ವೀಕರಣ:
ಈ ದಸ್ತಾವೇಜನ್ನು AI ಅನುವಾದ ಸೇವೆ [Co-op Translator](https://github.com/Azure/co-op-translator) ಬಳಸಿ ಅನುವಾದಿಸಲಾಗಿದೆ. ನಾವು ನಿಖರತೆಗೆ ಯತ್ನಿಸುತ್ತಿದ್ದರೂ, ದಯವಿಟ್ಟು ಗಮನಿಸಿ ಸ್ವಯಂಚಾಲಿತ ಅನುವಾದಗಳಲ್ಲಿ ದೋಷಗಳು ಅಥವಾ ಅಸತ್ಯತೆಗಳು ಇರಬಹುದು. ಮೂಲ ದಸ್ತಾವೇಜನ್ನು ಅದರ ಸ್ವಭಾಷೆಯಲ್ಲಿ ಅಧಿಕಾರಿಕ ಮೂಲವೆಂದು ಪರಿಗಣಿಸಬೇಕು. ಮಹತ್ವದ ಮಾಹಿತಿಗಾಗಿ ವೃತ್ತಿಪರ ಮಾನವ ಅನುವಾದವನ್ನು ಶಿಫಾರಸು ಮಾಡಲಾಗುತ್ತದೆ. ಈ ಅನುವಾದದ ಬಳಕೆಯಿಂದ ಉಂಟಾಗಬಹುದಾದ ಯಾವುದೇ ತಪ್ಪು ಅರ್ಥಗ್ರಹಣೆಗಳು ಅಥವಾ ದೋಷವಿವರಣೆಗಳಿಗಾಗಿ ನಾವು ಜವಾಬ್ದಾರರಾಗುವುದಿಲ್ಲ.
<!-- CO-OP TRANSLATOR DISCLAIMER END -->