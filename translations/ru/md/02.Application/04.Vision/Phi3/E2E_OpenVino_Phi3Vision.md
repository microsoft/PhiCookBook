<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "d7d7afa242a4a041ff4193546d4baf16",
  "translation_date": "2025-03-27T12:56:46+00:00",
  "source_file": "md\\02.Application\\04.Vision\\Phi3\\E2E_OpenVino_Phi3Vision.md",
  "language_code": "ru"
}
-->
Этот демонстрационный пример показывает, как использовать предварительно обученную модель для генерации Python-кода на основе изображения и текстового запроса.

[Пример кода](../../../../../../code/06.E2E/E2E_OpenVino_Phi3-vision.ipynb)

Вот пошаговое объяснение:

1. **Импорты и настройка**:
   - Импортируются необходимые библиотеки и модули, включая `requests`, `PIL` для обработки изображений и `transformers` для работы с моделью и обработки данных.

2. **Загрузка и отображение изображения**:
   - Файл изображения (`demo.png`) открывается с помощью библиотеки `PIL` и отображается.

3. **Определение запроса**:
   - Создается сообщение, включающее изображение и запрос на генерацию Python-кода для обработки изображения и его сохранения с использованием `plt` (matplotlib).

4. **Загрузка процессора**:
   - `AutoProcessor` загружается из предварительно обученной модели, указанной в каталоге `out_dir`. Этот процессор будет обрабатывать текстовые и визуальные входные данные.

5. **Создание запроса**:
   - Метод `apply_chat_template` используется для форматирования сообщения в запрос, подходящий для модели.

6. **Обработка входных данных**:
   - Запрос и изображение преобразуются в тензоры, которые может понять модель.

7. **Настройка параметров генерации**:
   - Определяются параметры процесса генерации модели, включая максимальное количество новых токенов и использование выборки для вывода.

8. **Генерация кода**:
   - Модель генерирует Python-код на основе входных данных и параметров генерации. `TextStreamer` используется для обработки вывода, исключая запрос и специальные токены.

9. **Вывод**:
   - Сгенерированный код выводится на экран. Он должен включать Python-код для обработки изображения и его сохранения в соответствии с запросом.

Этот демонстрационный пример показывает, как использовать предварительно обученную модель с OpenVino для динамической генерации кода на основе пользовательского ввода и изображений.

**Отказ от ответственности**:  
Этот документ был переведен с использованием сервиса автоматического перевода [Co-op Translator](https://github.com/Azure/co-op-translator). Несмотря на наши усилия обеспечить точность, имейте в виду, что автоматический перевод может содержать ошибки или неточности. Оригинальный документ на его родном языке следует считать авторитетным источником. Для получения важной информации рекомендуется профессиональный перевод человеком. Мы не несём ответственности за любые недоразумения или неправильные интерпретации, возникающие в результате использования данного перевода.