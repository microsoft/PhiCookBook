<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "b267038b665ba40cfaac6c6d975ccc40",
  "translation_date": "2025-12-21T19:48:02+00:00",
  "source_file": "md/02.Application/02.Code/Phi3/VSCodeExt/HOL/AIPC/04.CreatePhi3AgentInVSCode.md",
  "language_code": "te"
}
-->
# **Lab 3 - GitHub Copilot Chatలో @PHI3 ఏజెంట్ సృష్టించండి**

Visual Studio Code Copilot Chatలో, మీరు మొత్తం ప్రాజెక్ట్‌ను @workspace ద్వారా నిర్వహించవచ్చు. ఎంటర్ప్రైజ్ సందర్భాలలో, Copilot Chat యొక్క ఏజెంట్‌ని మరింత లవచ్ఛితంగా అనుకూలీకరించవచ్చు. 

ఇతర ల్యాబ్‌లో, మేము NPU మరియు క్లౌడ్‌ను కలిపి Phi3 ఏజెంట్ కోసం Visual Studio Code Extension పూర్తి చేసినాము.

![ఏజెంట్](../../../../../../../../../translated_images/te/vscode_agent.746efdf2e81957c2.png)

### **1. VSCode డెవలప్‌మెంట్ ఎక్స్‌టెన్షన్ సృష్టించండి**

దయచేసి ఈ లింక్‌ను పరిశీలించండి [https://code.visualstudio.com/api/get-started/your-first-extension](https://code.visualstudio.com/api/get-started/your-first-extension) Extension ప్రాజెక్ట్‌ని సృష్టించడానికి

***గమనిక:*** దయచేసి ఈ ప్రాజెక్ట్ కోసం సాంకేతిక పరిష్కారంగా Typescript, WebPack ఉపయోగించండి

### **2. Add vscode.d.ts**

Visual Studio Code Chat API ఇంకా కోడ్ APIలో విలీనం కాలేదు, కానీ ఇప్పుడు extensions ద్వారా జోడించబడింది.


Download vscode.d.ts [https://github.com/microsoft/vscode/blob/main/src/vscode-dts/vscode.d.ts](https://github.com/microsoft/vscode/blob/main/src/vscode-dts/vscode.d.ts)


***గమనిక:*** దయచేసి దీన్ని Visual Studio Code Insiders 1.90+ లో నడపండి



### **3. package.json ని నవీకరించండి**

```json

{
  "name": "phi3ext",
  "displayName": "phi3ext",
  "description": "",
  "version": "0.0.1",
  "engines": {
    "vscode": "^1.90.0"
  },
  "categories": [
      "AI",
      "Chat"
  ],
  "activationEvents": [],
  "enabledApiProposals": [
      "chatVariableResolver"
  ],
  "main": "./dist/extension.js",
  "contributes": {
      "chatParticipants": [
          {
              "id": "chat.PHI3",
              "name": "PHI3",
              "description": "Hey! I am PHI3",
              "isSticky": true,
              "commands": [
                  {
                      "name": "gen",
                      "description": "I am PHI3, you can gen code with me"
                  },
                  {
                      "name": "img",
                      "description": "I am PHI3-vision, you can gen code from img with me"
                  }
              ]
          }
      ],
      "commands": [
          {
              "command": "PHI3.namesInEditor",
              "title": "Use PHI3 in Editor"
          }
      ]
  },  
  "scripts": {
    "vscode:prepublish": "npm run package",
    "compile": "webpack",
    "watch": "webpack --watch",
    "package": "webpack --mode production --devtool hidden-source-map",
    "compile-tests": "tsc -p . --outDir out",
    "watch-tests": "tsc -p . -w --outDir out",
    "pretest": "npm run compile-tests && npm run compile && npm run lint",
    "lint": "eslint src --ext ts",
    "test": "vscode-test"
  },
  "devDependencies": {
    "@types/vscode": "^1.90.0",
    "@types/mocha": "^10.0.6",
    "@types/node": "18.x",
    "@typescript-eslint/eslint-plugin": "^7.11.0",
    "@typescript-eslint/parser": "^7.11.0",
    "eslint": "^8.57.0",
    "typescript": "^5.4.5",
    "ts-loader": "^9.5.1",
    "webpack": "^5.91.0",
    "webpack-cli": "^5.1.4",
    "@vscode/test-cli": "^0.0.9",
    "@vscode/test-electron": "^2.4.0"
  },
  "dependencies": {
    "@types/node-fetch": "^2.6.11",
    "node-fetch": "^3.3.2"
  }
}

```

మీరు టెర్మినల్‌లో **npm install** నడుపి మీ ఎక్స్‌టెన్షన్‌ను డీబగ్ చేసి పరీక్షించవచ్చు.

***సాంపిల్ కోడ్ డౌన్లోడ్*** [ఇక్కడ క్లిక్ చేయండి](../../../../../../../../../code/07.Lab/01/AIPC)


### **4. src/extension.ts మార్చండి**


```ts

// మాడ్యూల్ 'vscode'లో VS Code విస్తరణ API ఉంటుంది
// క్రింద మీ కోడులో ఆ మాడ్యూల్‌ను ఇంపోర్ట్ చేసి దాన్ని vscode అనే అలియాస్‌తో సూచించండి
import * as vscode from 'vscode';


interface IPHI3ChatResult extends vscode.ChatResult {
    metadata: {
        command: string;
    }
}


// మీ విస్తరణ సక్రియమైనప్పుడు ఈ విధానం పిలవబడుతుంది
// మీ విస్తరణ ఆ కమాండ్‌ను అమలు చేసిన తొలిసారి సక్రియమవుతుంది
export function activate(extcontext: vscode.ExtensionContext) {


	// SHEIN చాట్ హ్యాండ్లర్‌ను నిర్వచించండి.
	const phi3handler: vscode.ChatRequestHandler = async (request: vscode.ChatRequest, context: vscode.ChatContext, stream: vscode.ChatResponseStream, token: vscode.CancellationToken): Promise<IPHI3ChatResult> => {

		if (request.command == 'gen') {

			const content = "Welcome to Phi-3 to gen code";

			

			const result = await gen(request.prompt);

			const code = result;
			
			
			stream.progress("```txt"+"\n"+code+ +"\n"+"```")


            return { metadata: { command: 'gen' } };

		}
		if (request.command == 'img') {

			const content = "Welcome to Phi-3 vision to gen code in image";

			const prompt = request.prompt;

			if(prompt.indexOf("(IMG_URL:")>-1){

				const img_url = prompt.split("(IMG_URL:")[1].split(")")[0];
				const question = prompt.split("(IMG_URL:")[0];
				const tmp = question;

				const result = await genImage(question,img_url);
	
				const code = result;
				
				
				stream.progress(code)
	
	
				return { metadata: { command: 'img' } };
			}
			else
			{
				var result = "```txt"+"\n\n"+"Please ask question like this Your question (IMG_URL:https://example.com/image.jpg)"+"\n\n"++"```";
				stream.progress(result);

			}




            return { metadata: { command: 'img' } };

		}



		return { metadata: { command: '' } };

	}


	const xp = vscode.chat.createChatParticipant("chat.PHI3", phi3handler);

	xp.iconPath = new vscode.ThemeIcon('sparkle');


    xp.followupProvider = {
        provideFollowups(result: IPHI3ChatResult, context: vscode.ChatContext, token: vscode.CancellationToken) {
            return [{
                prompt: 'let us code with Phi-3 Family',
                label: vscode.l10n.t('Dev with Phi-3 Family'),
                command: 'help'
            } satisfies vscode.ChatFollowup];
        }
    };

	extcontext.subscriptions.push(xp);
}



interface GenCode {
	question: string;
}

interface ImgGenCodeResponse {
	output: string;
}


interface GenCodeResponse {
	answer: string;
}

async function gen(prompt: string) {

	const postData: GenCode = {
		question: prompt
	};
	const response = await fetch('http://localhost:8080/score', {
		method: 'POST',
		body: JSON.stringify(postData),
		headers: { 'Content-Type': 'application/json' }
	});
	const post = await response.json();
	const resultResponse = post as GenCodeResponse;
	return resultResponse.answer;
}

async function genImage(prompt: string, img_url: string) {

	const response = await fetch('Your Phi-3-Vision Endpoint', {
		method: 'POST',
		body: JSON.stringify({
			"input_data":{
			  "input_string":[
				{
				  "role":"user",
				  "content":[ 
					{
					  "type": "text",
					  "text": prompt
					},
					{
						"type": "image_url",
						"image_url": {
						  "url": img_url
						}
					}
				  ]
				}
			  ],
			  "parameters":{
					"temperature": 0.6,
					"top_p": 0.9,
					"do_sample": false,
					"max_new_tokens": 2048
			  }
			}
		}),
		headers: { 'Content-Type': 'application/json', 'Authorization' : 'Bearer Your Phi-3-Vision Endpoint Key', 'azureml-model-deployment': 'Your Phi-3-Vision Deployment name' }
	});
	const post = await response.json();
	const resultResponse = post as ImgGenCodeResponse;
	return resultResponse.output;
}

// మీ విస్తరణ నిష్క్రియమైనప్పుడు ఈ విధానం పిలవబడుతుంది
export function deactivate() {}




```

అభినందనలు ! మీరు అన్ని ల్యాబ్‌లను పూర్తిచేసారు. ఇది మీకు Phi-3 కుటుంబాన్ని మరియు GitHub Copilot Chat ను ఉపయోగించుకునే విధానాన్ని అవగాహన చేయడంలో సహాయపడాలని నేను ఆశిస్తున్నాను.


మీరు ప్రయత్నించవచ్చు ***@PHI3 /gen*** 

![కోడ్](../../../../../../../../../translated_images/te/result_code.ae0d053b45202798.png)

మీరు ప్రయత్నించవచ్చు ***@PHI3 /img*** 

![చిత్రం](../../../../../../../../../translated_images/te/result_img.436817a2bb3a34cf.png)

---

<!-- CO-OP TRANSLATOR DISCLAIMER START -->
డిస్క్లెయిమర్:
ఈ పత్రాన్ని AI అనువాద సేవ [Co-op Translator](https://github.com/Azure/co-op-translator) ఉపయోగించి అనువదించబడింది. మేము ఖచ్చితత్వానికి ప్రయత్నించినప్పటికీ, స్వయంచాలక అనువాదాల్లో పొరపాట్లు లేదా అపష్టతలు ఉండే అవకాశం ఉందని దయచేసి గమనించండి. స్థానిక భాషలో ఉన్న అసలు పత్రాన్ని అధికారిక మూలంగా పరిగణించాలి. కీలకమైన సమాచారం కోసం ప్రొఫెషనల్ మానవ అనువాదాన్ని సిఫార్సు చేయబడుతోంది. ఈ అనువాదాన్ని ఉపయోగించడం వల్ల ortaya అయిన ఏమైనా అపార్థాలు లేదా తప్పుగా అర్థం చేసుకోవడాలపై మేము బాధ్యులు కానిమి.
<!-- CO-OP TRANSLATOR DISCLAIMER END -->