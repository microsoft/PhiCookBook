<!--
CO_OP_TRANSLATOR_METADATA:
{
  "original_hash": "d7d7afa242a4a041ff4193546d4baf16",
  "translation_date": "2025-05-08T05:26:49+00:00",
  "source_file": "md/02.Application/04.Vision/Phi3/E2E_OpenVino_Phi3Vision.md",
  "language_code": "ja"
}
-->
このデモでは、画像とテキストプロンプトに基づいてPythonコードを生成するために、事前学習済みモデルを使用する方法を紹介します。

[Sample Code](../../../../../../code/06.E2E/E2E_OpenVino_Phi3-vision.ipynb)

以下はステップごとの説明です：

1. **インポートとセットアップ**:
   - 画像処理のための`requests`、`PIL`や、モデルと処理を扱うための`transformers`など、必要なライブラリとモジュールをインポートします。

2. **画像の読み込みと表示**:
   - `PIL`ライブラリを使って画像ファイル(`demo.png`)を開き、表示します。

3. **プロンプトの定義**:
   - 画像を含み、画像を処理して`plt`（matplotlib）を使って保存するPythonコードを生成するよう依頼するメッセージを作成します。

4. **プロセッサの読み込み**:
   - `out_dir`ディレクトリで指定された事前学習済みモデルから`AutoProcessor`を読み込みます。このプロセッサがテキストと画像の入力を処理します。

5. **プロンプトの作成**:
   - `apply_chat_template`メソッドを使って、メッセージをモデルに適したプロンプト形式に整えます。

6. **入力の処理**:
   - プロンプトと画像をモデルが理解できるテンソルに変換します。

7. **生成パラメータの設定**:
   - 生成プロセスの引数を定義します。生成する最大トークン数やサンプリングの有無などが含まれます。

8. **コードの生成**:
   - モデルが入力と生成パラメータに基づいてPythonコードを生成します。`TextStreamer`を使って、プロンプトや特殊トークンをスキップしながら出力を処理します。

9. **出力**:
   - 生成されたコードを表示します。プロンプトで指定した通り、画像を処理して保存するPythonコードが含まれているはずです。

このデモは、OpenVinoを活用して事前学習済みモデルを用い、ユーザーの入力や画像に基づいて動的にコードを生成する方法を示しています。

**免責事項**：  
本書類はAI翻訳サービス[Co-op Translator](https://github.com/Azure/co-op-translator)を使用して翻訳されました。正確性には努めておりますが、自動翻訳には誤りや不正確な部分が含まれる可能性があります。原文の言語による原本が正式な情報源とみなされるべきです。重要な情報については、専門の人間による翻訳を推奨します。本翻訳の利用により生じた誤解や誤訳について、一切の責任を負いかねますのでご了承ください。