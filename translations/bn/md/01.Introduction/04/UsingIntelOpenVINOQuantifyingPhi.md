# **Intel OpenVINO ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ Phi-3.5 ржХрзЛржпрж╝рж╛ржирзНржЯрж╛ржЗржЬрзЗрж╢ржи**

Intel рж╣рж▓ рж╕ржмржЪрзЗржпрж╝рзЗ ржкрзНрж░ржЪрж▓рж┐ржд CPU ржирж┐рж░рзНржорж╛рждрж╛ ржпрж╛рж░ ржЕржирзЗржХ ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзА рж░ржпрж╝рзЗржЫрзЗред ржорзЗрж╢рж┐ржи рж▓рж╛рж░рзНржирж┐ржВ ржПржмржВ ржбрж┐ржк рж▓рж╛рж░рзНржирж┐ржВржпрж╝рзЗрж░ ржЙрждрзНржерж╛ржирзЗрж░ рж╕рж╛ржерзЗ, Intel AI рждрзНржмрж░рж╛ржирзНржмрж┐ржд ржХрж░рж╛рж░ ржкрзНрж░рждрж┐ржпрзЛржЧрж┐рждрж╛ржпрж╝ ржпрзЛржЧ ржжрж┐ржпрж╝рзЗржЫрзЗред ржоржбрзЗрж▓ ржЗржиржлрж╛рж░рзЗржирзНрж╕рзЗрж░ ржЬржирзНржп, Intel рж╢рзБржзрзБржорж╛рждрзНрж░ GPU ржПржмржВ CPU ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржирж╛, ржмрж░ржВ NPU ржУ ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗред

ржЖржорж░рж╛ ржЖрж╢рж╛ ржХрж░рж┐ Phi-3.x ржкрж░рж┐ржмрж╛рж░ржХрзЗ ржПржирзНржб ржбрж┐ржнрж╛ржЗрж╕рзЗ ржбрж┐ржкрзНрж▓ржпрж╝ ржХрж░рждрзЗ, ржпрж╛ AI PC ржПржмржВ Copilot PC ржПрж░ рж╕ржмржЪрзЗржпрж╝рзЗ ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржЕржВрж╢ рж╣ржпрж╝рзЗ ржЙржаржмрзЗред ржПржирзНржб ржбрж┐ржнрж╛ржЗрж╕рзЗ ржоржбрзЗрж▓ рж▓рзЛржбрж┐ржВ ржмрж┐ржнрж┐ржирзНржи рж╣рж╛рж░рзНржбржУржпрж╝рзНржпрж╛рж░ ржирж┐рж░рзНржорж╛рждрж╛ржжрзЗрж░ рж╕рж╣ржпрзЛржЧрж┐рждрж╛рж░ ржЙржкрж░ ржирж┐рж░рзНржнрж░ ржХрж░рзЗред ржПржЗ ржЕржзрзНржпрж╛ржпрж╝ржЯрж┐ ржорзВрж▓ржд Intel OpenVINO ржХрзЗ ржХрзЛржпрж╝рж╛ржирзНржЯрж┐ржЯрзЗржЯрж┐ржн ржоржбрзЗрж▓ рж╣рж┐рж╕рзЗржмрзЗ ржмрзНржпржмрж╣рж╛рж░рзЗрж░ ржкрзНрж░рзЗржХрзНрж╖рж╛ржкржЯрзЗ ржлрзЛржХрж╛рж╕ ржХрж░рзЗред

## **OpenVINO ржХрзА?**

OpenVINO рж╣рж▓ ржПржХржЯрж┐ ржУржкрзЗржи-рж╕рзЛрж░рзНрж╕ ржЯрзБрж▓ржХрж┐ржЯ ржпрж╛ ржХрзНрж▓рж╛ржЙржб ржерзЗржХрзЗ ржПржЬ ржкрж░рзНржпржирзНржд ржбрж┐ржк рж▓рж╛рж░рзНржирж┐ржВ ржоржбрзЗрж▓ ржЕржкрзНржЯрж┐ржорж╛ржЗржЬ ржПржмржВ ржбрж┐ржкрзНрж▓ржпрж╝ ржХрж░рж╛рж░ ржЬржирзНржп ржмрзНржпржмрж╣рзГржд рж╣ржпрж╝ред ржПржЯрж┐ ржмрж┐ржнрж┐ржирзНржи ржмрзНржпржмрж╣рж╛рж░рзЗрж░ ржХрзНрж╖рзЗрждрзНрж░рзЗ ржбрж┐ржк рж▓рж╛рж░рзНржирж┐ржВ ржЗржиржлрж╛рж░рзЗржирзНрж╕ ржжрзНрж░рзБрждрждрж░ ржХрж░рзЗ, ржпрзЗржоржи ржЬрзЗржирж╛рж░рзЗржЯрж┐ржн AI, ржнрж┐ржбрж┐ржУ, ржЕржбрж┐ржУ, ржПржмржВ ржнрж╛рж╖рж╛, ржЬржиржкрзНрж░рж┐ржпрж╝ ржлрзНрж░рзЗржоржУржпрж╝рж╛рж░рзНржХ ржпрзЗржоржи PyTorch, TensorFlow, ONNX ржЗрждрзНржпрж╛ржжрж┐ ржерзЗржХрзЗ ржоржбрзЗрж▓ ржирж┐ржпрж╝рзЗред ржоржбрзЗрж▓ рж░рзВржкрж╛ржирзНрждрж░ ржПржмржВ ржЕржкрзНржЯрж┐ржорж╛ржЗржЬ ржХрж░рзЗ, Intel┬о рж╣рж╛рж░рзНржбржУржпрж╝рзНржпрж╛рж░ ржПржмржВ ржкрж░рж┐ржмрзЗрж╢рзЗрж░ ржорж┐рж╢рзНрж░ржгрзЗ, ржЕржи-ржкрзНрж░рж┐ржорж╛ржЗрж╕ ржПржмржВ ржЕржи-ржбрж┐ржнрж╛ржЗрж╕рзЗ, ржмрзНрж░рж╛ржЙржЬрж╛рж░ ржмрж╛ ржХрзНрж▓рж╛ржЙржбрзЗ ржбрж┐ржкрзНрж▓ржпрж╝ ржХрж░рж╛ ржпрж╛ржпрж╝ред

ржПржЦржи OpenVINO ржжрж┐ржпрж╝рзЗ, ржЖржкржирж┐ ржжрзНрж░рзБржд Intel рж╣рж╛рж░рзНржбржУржпрж╝рзНржпрж╛рж░рзЗ GenAI ржоржбрзЗрж▓ ржХрзЛржпрж╝рж╛ржирзНржЯрж╛ржЗржЬ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗржи ржПржмржВ ржоржбрзЗрж▓ рж░рзЗржлрж╛рж░рзЗржирзНрж╕ ржжрзНрж░рзБрждрждрж░ ржХрж░рждрзЗ ржкрж╛рж░ржмрзЗржиред

ржПржЦржи OpenVINO Phi-3.5-Vision ржПржмржВ Phi-3.5 Instruct ржПрж░ ржХрзЛржпрж╝рж╛ржирзНржЯрж╛ржЗржЬрзЗрж╢ржи рж░рзВржкрж╛ржирзНрждрж░ рж╕ржорж░рзНржержи ржХрж░рзЗред

### **ржкрж░рж┐ржмрзЗрж╢ рж╕рзЗржЯржЖржк**

ржирж┐рж╢рзНржЪрж┐ржд ржХрж░рзБржи ржирж┐ржЪрзЗрж░ ржкрж░рж┐ржмрзЗрж╢ ржирж┐рж░рзНржнрж░рж╢рзАрж▓рждрж╛ржЧрзБрж▓рзЛ ржЗржирж╕рзНржЯрж▓ ржХрж░рж╛ ржЖржЫрзЗ, ржПржЯрж┐ requirement.txt

```txt

--extra-index-url https://download.pytorch.org/whl/cpu
optimum-intel>=1.18.2
nncf>=2.11.0
openvino>=2024.3.0
transformers>=4.40
openvino-genai>=2024.3.0.0

```

### **OpenVINO ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ Phi-3.5-Instruct ржХрзЛржпрж╝рж╛ржирзНржЯрж╛ржЗржЬрзЗрж╢ржи**

ржЯрж╛рж░рзНржорж┐ржирж╛рж▓рзЗ ржирж┐ржЪрзЗрж░ рж╕рзНржХрзНрж░рж┐ржкрзНржЯржЯрж┐ ржЪрж╛рж▓рж╛ржи

```bash


export llm_model_id = "microsoft/Phi-3.5-mini-instruct"

export llm_model_path = "your save quantizing Phi-3.5-instruct location"

optimum-cli export openvino --model {llm_model_id} --task text-generation-with-past --weight-format int4 --group-size 128 --ratio 0.6  --sym  --trust-remote-code {llm_model_path}


```

### **OpenVINO ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ Phi-3.5-Vision ржХрзЛржпрж╝рж╛ржирзНржЯрж╛ржЗржЬрзЗрж╢ржи**

Python ржмрж╛ Jupyter lab ржП ржирж┐ржЪрзЗрж░ рж╕рзНржХрзНрж░рж┐ржкрзНржЯржЯрж┐ ржЪрж╛рж▓рж╛ржи

```python

import requests
from pathlib import Path
from ov_phi3_vision import convert_phi3_model
import nncf

if not Path("ov_phi3_vision.py").exists():
    r = requests.get(url="https://raw.githubusercontent.com/openvinotoolkit/openvino_notebooks/latest/notebooks/phi-3-vision/ov_phi3_vision.py")
    open("ov_phi3_vision.py", "w").write(r.text)


if not Path("gradio_helper.py").exists():
    r = requests.get(url="https://raw.githubusercontent.com/openvinotoolkit/openvino_notebooks/latest/notebooks/phi-3-vision/gradio_helper.py")
    open("gradio_helper.py", "w").write(r.text)

if not Path("notebook_utils.py").exists():
    r = requests.get(url="https://raw.githubusercontent.com/openvinotoolkit/openvino_notebooks/latest/utils/notebook_utils.py")
    open("notebook_utils.py", "w").write(r.text)



model_id = "microsoft/Phi-3.5-vision-instruct"
out_dir = Path("../model/phi-3.5-vision-128k-instruct-ov")
compression_configuration = {
    "mode": nncf.CompressWeightsMode.INT4_SYM,
    "group_size": 64,
    "ratio": 0.6,
}
if not out_dir.exists():
    convert_phi3_model(model_id, out_dir, compression_configuration)

```

### **ЁЯдЦ Intel OpenVINO рж╕рж╣ Phi-3.5 ржПрж░ ржиржорзБржирж╛**

| рж▓рзНржпрж╛ржмрж╕    | ржкрж░рж┐ржЪрж┐рждрж┐ | ржпрж╛ржи |
| -------- | ------- |  ------- |
| ЁЯЪА Lab-Introduce Phi-3.5 Instruct  | ржЖржкржирж╛рж░ AI PC рждрзЗ Phi-3.5 Instruct ржХрзАржнрж╛ржмрзЗ ржмрзНржпржмрж╣рж╛рж░ ржХрж░ржмрзЗржи рж╢рж┐ржЦрзБржи    |  [Go](../../../../../code/09.UpdateSamples/Aug/intel-phi35-instruct-zh.ipynb)    |
| ЁЯЪА Lab-Introduce Phi-3.5 Vision (image) | ржЖржкржирж╛рж░ AI PC рждрзЗ Phi-3.5 Vision ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржЫржмрж┐ ржмрж┐рж╢рзНрж▓рзЗрж╖ржг ржХрж░рж╛рж░ ржкржжрзНржзрждрж┐ рж╢рж┐ржЦрзБржи      |  [Go](../../../../../code/09.UpdateSamples/Aug/intel-phi35-vision-img.ipynb)    |
| ЁЯЪА Lab-Introduce Phi-3.5 Vision (video)   | ржЖржкржирж╛рж░ AI PC рждрзЗ Phi-3.5 Vision ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржнрж┐ржбрж┐ржУ ржмрж┐рж╢рзНрж▓рзЗрж╖ржг ржХрж░рж╛рж░ ржкржжрзНржзрждрж┐ рж╢рж┐ржЦрзБржи    |  [Go](../../../../../code/09.UpdateSamples/Aug/intel-phi35-vision-video.ipynb)    |

## **рж░рж┐рж╕рзЛрж░рзНрж╕рж╕ржорзВрж╣**

1. Intel OpenVINO рж╕ржорзНржкрж░рзНржХрзЗ ржЖрж░ржУ ржЬрж╛ржирзБржи [https://www.intel.com/content/www/us/en/developer/tools/openvino-toolkit/overview.html](https://www.intel.com/content/www/us/en/developer/tools/openvino-toolkit/overview.html)

2. Intel OpenVINO GitHub рж░рж┐ржкрзЛржЬрж┐ржЯрж░рж┐ [https://github.com/openvinotoolkit/openvino.genai](https://github.com/openvinotoolkit/openvino.genai)

**ржЕрж╕рзНржмрзАржХрзГрждрж┐**:  
ржПржЗ ржиржерж┐ржЯрж┐ AI ржЕржирзБржмрж╛ржж рж╕рзЗржмрж╛ [Co-op Translator](https://github.com/Azure/co-op-translator) ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗ ржЕржирзВржжрж┐ржд рж╣ржпрж╝рзЗржЫрзЗред ржЖржорж░рж╛ ржпржерж╛рж╕рж╛ржзрзНржп рж╕ржарж┐ржХрждрж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рж┐, рждржмрзЗ рж╕рзНржмржпрж╝ржВржХрзНрж░рж┐ржпрж╝ ржЕржирзБржмрж╛ржжрзЗ рждрзНрж░рзБржЯрж┐ ржмрж╛ ржЕрж╕ржЩрзНржЧрждрж┐ ржерж╛ржХрждрзЗ ржкрж╛рж░рзЗред ржорзВрж▓ ржиржерж┐ржЯрж┐ рждрж╛рж░ ржирж┐ржЬрж╕рзНржм ржнрж╛рж╖рж╛ржпрж╝ржЗ ржХрж░рзНрждрзГрждрзНржмржкрзВрж░рзНржг ржЙрзОрж╕ рж╣рж┐рж╕рзЗржмрзЗ ржмрж┐ржмрзЗржЪрж┐ржд рж╣ржУржпрж╝рж╛ ржЙржЪрж┐рждред ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг рждржерзНржпрзЗрж░ ржЬржирзНржп ржкрзЗрж╢рж╛ржжрж╛рж░ ржорж╛ржиржм ржЕржирзБржмрж╛ржж ржЧрзНрж░рж╣ржг ржХрж░рж╛рж░ ржкрж░рж╛ржорж░рзНрж╢ ржжрзЗржУржпрж╝рж╛ рж╣ржпрж╝ред ржПржЗ ржЕржирзБржмрж╛ржжрзЗрж░ ржмрзНржпржмрж╣рж╛рж░рзЗ рж╕рзГрж╖рзНржЯ ржХрзЛржирзЛ ржнрзБрж▓ ржмрзЛржЭрж╛ржмрзБржЭрж┐ ржмрж╛ ржнрзБрж▓ ржмрзНржпрж╛ржЦрзНржпрж╛рж░ ржЬржирзНржп ржЖржорж░рж╛ ржжрж╛ржпрж╝рзА ржиржЗред